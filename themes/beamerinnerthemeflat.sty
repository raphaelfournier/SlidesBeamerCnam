% File for the Beamer Inner Theme flat 2013
% Copyright 2013 by Raul Gomez
% This file may be distributed and/or modified
% 	1. under the LaTeX Project Public License and/or
% 	2. under the GNU Public License.
%
% Based on: beamerinnerthemeFlip by Flip Tanedo

\mode<presentation>

% <<< Options

\DeclareOptionBeamer{bullet}{\def\beamer@flat@bullet{#1}}
\ExecuteOptionsBeamer{bullet=square}

\ProcessOptionsBeamer

\RequirePackage{pdfrender}
\RequirePackage{tikz}
    \usetikzlibrary{calc}
    \usetikzlibrary{intersections}
    \usetikzlibrary{positioning}
% >>>

% <<< Title page 

\defbeamertemplate*{title page}{flat}[1][]{
	\begin{beamercolorbox}[wd=\the\paperwidth, ht=\the\paperheight,ignorebg]{}
		\begin{tikzpicture}
			\fill[color=cnamRed] (0, 0cm) rectangle(9.6cm, 12.8cm);
			\node[anchor=center,text width=7cm,inner xsep=0.2cm] at (5cm,6cm) {\color{warm grey 3}\Huge\textbf{\inserttitle}\par};
			\node[anchor=center,text width=7cm,inner xsep=0.2cm] at (5cm,4.5cm) {\color{warm grey 3}\textbf{\insertsubtitle}};
			\node[anchor=center,text width=7cm,inner xsep=0.2cm] at (5cm,3cm) {\color{warm grey 3}\large\insertauthor};
			\node[anchor=center,text width=7cm,inner xsep=0.2cm] at (5cm,2.3cm) {\small\color{warm grey 3}\insertinstitute,~\insertemail};

			\node[anchor=center,align=center, text width=2.6cm] at (11.2cm,1.6cm) {\color{Cool Grey 11}\insertpromo\\ \color{Cool Grey 11}\insertmatiere\\ \insertannee};
			\node[anchor=center] at(11.2cm,0.5cm) {\insertlogo};
		\end{tikzpicture}
	\end{beamercolorbox}%
}

% >>>

% <<< Margins 

\newlength{\beamer@Ithaca@normalmargin}
\setlength{\beamer@Ithaca@normalmargin}{.06\paperwidth}
\setbeamersize{text margin left=\beamer@Ithaca@normalmargin}
\setbeamersize{text margin right=\beamer@Ithaca@normalmargin}
\setlength\leftmargini{.6\beamer@Ithaca@normalmargin}
\setlength\leftmarginii{.6\beamer@Ithaca@normalmargin}
\setlength\leftmarginiii{.6\beamer@Ithaca@normalmargin}

% >>>

% <<< Items 

%bullet=circle  
\defbeamertemplate{itemize item}{squarealt}{\tiny\raise.5ex\hbox{\donotcoloroutermaths$\blacksquare$}}
\defbeamertemplate{itemize subitem}{squarealt}{\tiny\raise.4ex\hbox{\color{Cool Grey 11}$\blacksquare$}}
\defbeamertemplate{itemize subsubitem}{squarealt}{\tiny\raise.3ex\hbox{\donotcoloroutermaths$\blacksquare$}}

%bullet=square 
\defbeamertemplate{itemize item}{circlealt}{\small\raise.2ex\hbox{\donotcoloroutermaths$\bullet$}}
\defbeamertemplate{itemize subitem}{circlealt}{\small\raise.1ex\hbox{\donotcoloroutermaths$\circ$}}
\defbeamertemplate{itemize subsubitem}{circlealt}{\scriptsize\raise.1ex\hbox{\donotcoloroutermaths$\bullet$}}
\setbeamertemplate{items}[circlealt]
 
%choose apropriate bullet
\def\circletext{circle}
\ifx\beamer@flat@bullet\circletext
  \setbeamertemplate{items}[circlealt]
\else
  \setbeamertemplate{items}[squarealt]
\fi

% >>>

% <<< Table of Contents 

\defbeamertemplate*{section in toc}{flat}{\inserttocsectionnumber~\inserttocsection\par}

\defbeamertemplate*{subsection in toc}{flat}{%
%\leavevmode\leftskip=1.5em\inserttocsectionnumber.\inserttocsubsectionnumber~\inserttocsubsection\par%
\leavevmode\leftskip=1.5em\inserttocsubsectionnumber~--~\inserttocsubsection\par%
}

\defbeamertemplate*{subsubsection in toc}{flat}{%
\leavevmode\normalsize\usebeamerfont{subsection in toc}\leftskip=3em%
  \usebeamerfont{subsubsection in toc}\inserttocsectionnumber.\inserttocsubsectionnumber.%
\inserttocsubsubsectionnumber~\inserttocsubsubsection\par%
}
% >>>

% <<< Theorems and such 

%plain theorem environment
\makeatletter
\def\th@plain{%
    \normalfont % body font
    \def\inserttheoremblockenv{alertblock}
  }
\makeatother

%theorem environments using the plain style.
\theoremstyle{plain}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{algorithm}[theorem]{Algorithm}
\newtheorem{axiom}[theorem]{Axiom}
\newtheorem{criterion}[theorem]{Criterion}

\newtheorem{theofr}[theorem]{Théorème}


%definition theorem environment
\makeatletter
\def\th@definition{%
    \normalfont % body font
    \def\inserttheoremblockenv{block}
  }
\makeatother

%difinition-type theorem environments.
\theoremstyle{definition}
\newtheorem{condition}[theorem]{Condition}
\newtheorem{exercise}[theorem]{Exercise}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{case}[theorem]{Case}
\newtheorem{question}[theorem]{Question}

%remark theorem environment
\makeatletter
\def\th@remark{%
    \normalfont % body font
    \def\inserttheoremblockenv{exampleblock}
  }
\makeatother

%remark-type theorem environments
\theoremstyle{remark}
\newtheorem{remarken}[theorem]{Remark}
\newtheorem{remarks}[theorem]{Remarks}
\newtheorem{summary}[theorem]{Summary}
\newtheorem{observation}[theorem]{Observation}
\newtheorem{conclusion}[theorem]{Conclusion}
\newtheorem{acknowledgement}[theorem]{Acknowledgement}

\newtheorem{remark}[theorem]{Remarque}

% >>>

% <<< Buttons 

\newlength{\tempa}%
\newlength{\buttonmargin}%

\defbeamertemplate*{button}{flat}{%
%
\settowidth{\tempa}{\insertbuttontext}%
\setlength{\buttonmargin}{1.125ex}
%
\addtolength{\tempa}{2\buttonmargin}
%
\begin{beamercolorbox}[wd=\tempa,ht=2.5ex,dp=\buttonmargin,center]{button}%
\insertbuttontext%
\end{beamercolorbox}%
}

% >>>

\mode<all>

% vim: set fdm=marker fmr=<<<,>>> fdl=0:fdc=2
